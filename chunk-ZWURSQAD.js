import{Aa as B,Ba as o,Ca as l,Da as u,Fa as U,G as T,Ga as p,H as q,Ha as G,Ia as v,K as b,P as r,R as h,Ra as y,X as M,a as m,ab as H,b as f,ba as N,ca as R,e as E,j as S,k as C,l as D,na as c,p as I,q as F,r as $,ta as k,v as j,ya as L,za as O}from"./chunk-4YAR2T57.js";var z=(s,e)=>e.name;function Y(s,e){if(s&1&&(o(0,"div",2),u(1,"input",3),o(2,"div",4)(3,"div",5)(4,"div",6),u(5,"img",7),o(6,"p",8),p(7),l()()(),o(8,"div")(9,"p",9),p(10," Level 1 Evocation Spell "),l()()(),o(11,"div",10)(12,"p"),p(13,"Collapse Content"),l()()()),s&2){let a=e.$implicit;c(),U("name",a.name),c(6),G(" ",a.name," ")}}var P=(()=>{let e=class e{constructor(){this.spells=R.required(),this.schools=[{initial:"A",name:"Abjuration"},{initial:"C",name:"Conjuration"},{initial:"D",name:"Divination"},{initial:"E",name:"Enchantment"},{initial:"V",name:"Evocation"},{initial:"I",name:"Illusion"},{initial:"N",name:"Necromancy"},{initial:"T",name:"Transmutation"}]}getImageSourceForSpell(t,n){let i="./assets/spells/Spell",x=this.schools.find(d=>d.initial===t)?.name,X=n.split(" ").map(d=>`${d[0].toUpperCase()}${d.substring(1)}`).join("");return`${i}_${x}_${X}.webp`}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["dnd-spells-list"]],inputs:{spells:[1,"spells"]},standalone:!0,features:[v],decls:4,vars:0,consts:[[1,"join","join-vertical","m-1","flex","w-full","bg-gradient-to-r","from-amber-800","via-amber-400","to-amber-800","text-white"],[1,"mx-0.5","rounded-lg"],[1,"collapse","join-item","collapse-arrow","my-0.5","bg-brown-900"],["type","checkbox",3,"name"],[1,"collapse-title"],[1,"flex","flex-col"],[1,"flex"],["src","./assets/spells/Spell_Evocation_EldritchBlast.webp","alt","",1,"w-8"],[1,"sm:text:xl","font-alegreya","text-lg","font-extrabold"],[1,"text-md","font-alegreya","font-extrabold","text-brown-200"],[1,"collapse-content"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1),O(2,Y,14,2,"div",2,z),l()()),n&2&&(c(2),B(i.spells()))},encapsulation:2});let s=e;return s})();function g(s){s||(M(g),s=r(N));let e=new E(a=>s.onDestroy(a.next.bind(a)));return a=>a.pipe(q(e))}var A=(()=>{let e=class e{constructor(){this.httpClient=r(H)}requestSpellbooks(){return D([{name:"Player's Handbook",id:"PHB",jsonFileName:"spells-phb.json",spells:[],isSelected:!1,isLoaded:!1},{name:"Xenethar's Guide to Everything",id:"XGE",jsonFileName:"spells-xge.json",spells:[],isSelected:!1,isLoaded:!1},{name:"Tasha's Cauldron of Everything",id:"TCE",jsonFileName:"spells-tce.json",spells:[],isSelected:!1,isLoaded:!1},{name:"Fizban's Treasury of Dragons",id:"FTD",jsonFileName:"spells-ftd.json",spells:[],isSelected:!1,isLoaded:!1}])}requestGeneralBooksData(){return this.httpClient.get("https://5e.tools/data/generated/gendata-nav-adventure-book-index.json").pipe(j(t=>(this.handleError(t),S)),I(t=>t.adventure.concat(t.book)))}requestSpellsInBook(t){return this.httpClient.get(`https://5e.tools/data/spells/${t}`).pipe(j(n=>(this.handleError(n),S)))}handleError(t){console.log(t)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var V=(()=>{let e=class e{constructor(){this.fiveEtoolsService=r(A),this.state=k({spellbooks:[],spells:[]}),this.spellbooks=y(()=>this.state().spellbooks),this.spells=y(()=>this.state().spellbooks.map(t=>t.spells).flat()),this.spellbooks$=F([this.fiveEtoolsService.requestSpellbooks(),this.fiveEtoolsService.requestGeneralBooksData()]).pipe(T(([t,n])=>(t.forEach(i=>i.name=n.find(x=>x.id==i.id)?.name),C(t)))),this.spells$=this.spellbooks$.pipe($(t=>this.fiveEtoolsService.requestSpellsInBook(t.jsonFileName))),this.spellbooks$.pipe(g()).subscribe(t=>this.state.update(n=>f(m({},n),{spellbooks:[...n.spellbooks,t]}))),this.spells$.pipe(g()).subscribe(t=>this.state.update(n=>f(m({},n),{spellbooks:n.spellbooks.map(i=>i.id===t.spell[0].source?f(m({},i),{spells:t.spell}):i)})))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var Ee=(()=>{let e=class e{constructor(){this.spellsService=r(V)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["dnd-spells"]],standalone:!0,features:[v],decls:4,vars:1,consts:[[1,"text-center","text-lg","font-bold","text-brown-500"],[1,"flex","w-full","justify-center"],[1,"container","flex","justify-center",3,"spells"]],template:function(n,i){n&1&&(o(0,"p",0),p(1," Player's Handbook "),l(),o(2,"div",1),u(3,"dnd-spells-list",2),l()),n&2&&(c(3),L("spells",i.spellsService.spells()))},dependencies:[P],encapsulation:2});let s=e;return s})();export{Ee as default};
